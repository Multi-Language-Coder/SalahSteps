<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compass</title>
    <style>
        /* Keep component-specific visuals; page background comes from ThemeService */
        .compass-container { width: min(80vw, 300px); height: min(80vw, 300px); border: 4px solid #4a5568; position: relative; }
        .compass-needle { position: absolute; top: 0; left: 50%; width: 8px; height: 100%; transform-origin: 50% 50%; transition: transform 0.1s ease-out; }
        .needle-top { width: 100%; height: 50%; background-color: #ef4444; clip-path: polygon(50% 0%, 0% 100%, 100% 100%); transform: scaleY(0.9); }
        .needle-bottom { width: 100%; height: 50%; background-color: #cbd5e1; transform: scaleY(0.9); clip-path: polygon(0% 0%, 100% 0%, 50% 100%); }
        .cardinal-point { position: absolute; font-size: 1.2rem; font-weight: bold; }
        .north { top: 10px; left: 50%; transform: translateX(-50%); }
        .south { bottom: 10px; left: 50%; transform: translateX(-50%); }
        .east { right: 10px; top: 50%; transform: translateY(-50%); }
        .west { left: 10px; top: 50%; transform: translateY(-50%); }
        body {

}

    </style>
</head>
<body style="">
    <app-navbar></app-navbar>
    <div id="message-box" style="position:fixed; top:0; left:0; right:0; padding:1rem; background:#FEF3C7; color:#92400E; text-align:center; transition: transform 0.3s ease; transform: translateY(-100%); z-index:50;">
        <!-- Message for the user will be displayed here -->
    </div>

    <div class="set-container" style="display:flex; flex-direction:column; align-items:center; justify-content:center; min-height: calc(100vh - 80px); padding: 2rem;">
        <h1 class="text-center" style="margin-bottom: 2rem; color: rgb(175, 175, 175);">Qibla Compass</h1>

        <div class="compass-container" style="background:#fff; border-radius: 9999px; display:flex; align-items:center; justify-content:center; margin-bottom:2rem;">
            <div class="qibla-range" id="qibla-range"></div>
            <div class="qibla-indicator" id="qibla-indicator"></div>
            <span class="cardinal-point north">N</span>
            <span class="cardinal-point south">S</span>
            <span class="cardinal-point east">E</span>
            <span class="cardinal-point west">W</span>
            <div id="compass-needle" class="compass-needle">
                <div class="needle-top"></div>
                <div class="needle-bottom"></div>
            </div>
        </div>

        <div class="text-center" style="margin-bottom:1.5rem;">
            <h2 id="heading-label" style="margin-bottom:0.5rem; color: rgb(175, 175, 175);">Current Heading:</h2>
            <h5 id="heading-label" style="font-size:2rem; font-weight:800; color:#2563EB;">{{currentHeading}}¬∞</h5>
        </div>

        <div class="text-center" style="margin-bottom:2rem;">
            <button *ngIf="isOrientationSupported" (click)="requestCompassPermission()" class="btn btn-success">
                üß≠ Enable Compass
            </button>
            <p *ngIf="!isOrientationSupported" style="color:#991B1B; font-weight:600; background:#FEF2F2; padding:1rem; border-radius:0.5rem; border:1px solid #FECACA;">
                ‚ùå Device orientation not supported on this browser/device.
            </p>
        </div>
    </div>
</body>
</html>
